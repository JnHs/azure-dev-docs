---
title: Use GitHub Copilot for Azure to Generate Terraform files
description: This article provides sample prompts and example responses from GitHub Copilot for Azure to create Terraform files to deploy Azure resources.
keywords: github, copilot, ai, azure
ms.service: github-copilot-for-azure
ms.topic: overview
ms.date: 2/18/2024
ms.collection: ce-skilling-ai-copilot
---

# Generate Terraform files using GitHub Copilot for Azure

There are many ways to create new resources on Azure, however, Terraform provides an infrastructure-as-code (IaC) approach that is declarative, scalable, and cloud-agnostic. It enables automation, state management, and modular configurations while offering improved maintainability and collaboration through version control. Compared to JSON-based ARM templates or imperative scripting methods like PowerShell and Azure CLI, Terraform allows for efficient resource provisioning with dependency management and reusable modules. GitHub Copilot for Azure can help you create Terraform configurations.

## Generate Terraform files

Creating Terraform templates can be a daunting task if you're new to the syntax.

### Example Scenario

Suppose you want an easy want to create a repeatable, automated process for creating a Blob container and file share. You may be familiar with how to do this in the Azure portal, but unsure how to use Terraform templates to accomplish this task.

### Example prompt

Create a New Chat (Ctrl + L), then copy and paste the following prompt into GitHub Copilot's chat pane.

```
@azure Show me a Terraform template that creates an Azure Storage account with a blob container and a file share.
```

### Example response

> [!NOTE]
> The following response is an example. GitHub Copilot for Azure responses are non-deterministic, so you may get a differetn response from the one shown here.

GitHub Copilot for Azure generates a Terraform file similar to the following.


```
# This configuration has been generated by the Azure Terraform plugin which utilizes Generative AI which may result in unintended or inaccurate configuration code. A human must validate that this configuration accomplishes the desired goal before applying the configuration.

provider "azurerm" {
  features {}
}

resource "azurerm_resource_group" "example" {
  name     = "example-resources"
  location = "West Europe"
}

resource "azurerm_storage_account" "example" {
  name                     = "examplestoracc"
  resource_group_name      = azurerm_resource_group.example.name
  location                 = azurerm_resource_group.example.location
  account_tier             = "Standard"
  account_replication_type = "LRS"
}

resource "azurerm_storage_container" "example_blob_container" {
  name                  = "myblobcontainer"
  storage_account_id    = azurerm_storage_account.example.id
  container_access_type = "private"
}

resource "azurerm_storage_share" "example_file_share" {
  name               = "myfileshare"
  storage_account_id = azurerm_storage_account.example.id
  quota              = 50
}
```

Create a new Terraform file, then copy the response from GitHub Copilot for Azure and paste into the new file.

Modify the place holder text for values like `example-resources`, `examplestoracc`, `myblobcontainer` and `myfileshare`, and modify values that affect the names, location, SKUs, etc.

## Refine the response

However, if you're new to bicep files, you may need more information. Continue prompting in the same chat sesssion to understand next steps.

For example, you may want specific instructions on which values to change.

```
@azure Which values should I replace in this Terraform template?
```

You may see a response similar to the following.

```
You should replace the following values in the Terraform template to suit your needs:

azurerm_resource_group.example.name: Change "example-resources" to your desired Resource Group name if necessary.
azurerm_resource_group.example.location: Update "West Europe" to the Azure region where you want to deploy the resources.
azurerm_storage_account.example.name: Ensure "examplestoracc" is a globally unique name for your storage account.
azurerm_storage_container.example_blob_container.name: Change "myblobcontainer" to your preferred blob container name.
azurerm_storage_share.example_file_share.name: Change "myfileshare" to your preferred file share name.
azurerm_storage_share.example_file_share.quota: Adjust the value 50 to set the desired size quota for your file share in GB.
These adjustments will tailor the template to your specific requirements and ensure successful deployment.
```

Or, you may want to ask where this Terraform file should be created in your VS Code workspace.

```
@azure Where in my workspace should I create the Terraform file and what should I call it?
```

It may respond by suggesting a folder and file name for your new bicep file.

```
In your workspace, you should create a Terraform configuration file with the .tf extension, commonly named main.tf. You can place it in the root directory of your Terraform project or in any organized directory named to suit your Azure resources, such as /terraform/.
```

If you're unsure about how to deploy the bicep file, you can create a prompt that asks for instructions.

```
@azure How do I execute the Terraform file?
```

You may receive a response similar to the following.

```
To execute the Terraform file, follow these steps:

Navigate to your project directory: Open a terminal and change the directory to where your Terraform file is located.

`cd path/to/your/terraform/directory`

Initialize the Terraform environment: Run this command to download the necessary providers and initialize your project.

`terraform init`

Review the execution plan: Generate and review the execution plan to verify the changes to be applied.

`terraform plan`

Apply the changes: Apply the planned changes to deploy the resources.

`terraform apply`

Confirm the action: Type yes when prompted to confirm and apply the changes.

This will execute the Terraform configuration and create the resources described in your template.
```

While running `terraform plan` or `terraform apply` in the terminal window you may see an error message:

```
Planning failed. Terraform encountered an error while generating this plan.

╷
│ Error: subscription_id is a required provider property when performing a plan/apply operation
│
│ with provider["registry.terraform.io/hashicorp/azurerm"],
│ on main.tf line 3, in provider "azurerm":
│ 3: provider "azurerm" {
│
```

To resolve this, you can create a prompt by copying the error message from the terminal and pasting to the chat pane. Doing so should reply with a response that is similar to the following:

```
To resolve the error, you need to specify the subscription_id in the provider block of your Terraform configuration. Here's how you can update your main.tf file:

provider "azurerm" {
  features {}
  subscription_id = "your-subscription-id"
}

Replace "your-subscription-id" with your actual Azure subscription ID. You can find your subscription ID in the Azure portal under "Subscriptions." After updating the file, run terraform init again, followed by terraform plan and terraform apply.
```

Modify your `main.tf` file to include the `subscription_id = "your-subscription-id"` per the instructions in the response and try again. It should work this time.


## Related content

- [Terraform overview](/azure/developer/terraform/overview)
- [What is GitHub Copilot for Azure Preview?](introduction.md)
- [Get started with GitHub Copilot for Azure Preview](get-started.md)
