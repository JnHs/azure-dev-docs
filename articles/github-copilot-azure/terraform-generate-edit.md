---
title: Use GitHub Copilot for Azure to Generate and Edit Terraform files
description: This article provides sample prompts and example responses from GitHub Copilot for Azure to create and edit Terraform files to deploy Azure resources.
keywords: github, copilot, ai, azure
ms.service: github-copilot-for-azure
ms.topic: overview
ms.date: 2/18/2024
ms.collection: ce-skilling-ai-copilot
---

# Generate Terraform files using GitHub Copilot for Azure

There are many ways to create new resources on Azure, however, Terraform provides an infrastructure-as-code (IaC) approach that is declarative, scalable, and cloud-agnostic. It enables automation, state management, and modular configurations while offering improved maintainability and collaboration through version control. Compared to JSON-based ARM templates or imperative scripting methods like PowerShell and Azure CLI, Terraform allows for efficient resource provisioning with dependency management and reusable modules. GitHub Copilot for Azure can help you create and edit Terraform configurations.

## Generate Terraform files

Creating Terraform templates can be a daunting task if you're new to the syntax.

### Example Scenario

Suppose you want an easy want to create a repeatable, automated process for creating a Blob container and file share. You may be familiar with how to do this in the Azure portal, but unsure how to use Terraform templates to accomplish this task.

### Example prompt

Create a New Chat (Ctrl + L), then copy and paste the following prompt into GitHub Copilot's chat pane.

```
@azure Show me a Terraform template that creates an Azure Storage account with a blob container and a file share.
```

### Example response

> [!NOTE]
> The following response is an example. GitHub Copilot for Azure responses are non-deterministic, so you may get a differetn response from the one shown here.

GitHub Copilot for Azure generates a Terraform file similar to the following.


```
# This configuration has been generated by the Azure Terraform plugin which utilizes Generative AI which may result in unintended or inaccurate configuration code. A human must validate that this configuration accomplishes the desired goal before applying the configuration.

provider "azurerm" {
  features {}
}

resource "azurerm_resource_group" "example" {
  name     = "example-resources"
  location = "West Europe"
}

resource "azurerm_storage_account" "example" {
  name                     = "examplestoracc"
  resource_group_name      = azurerm_resource_group.example.name
  location                 = azurerm_resource_group.example.location
  account_tier             = "Standard"
  account_replication_type = "LRS"
}

resource "azurerm_storage_container" "example_blob_container" {
  name                  = "myblobcontainer"
  storage_account_id    = azurerm_storage_account.example.id
  container_access_type = "private"
}

resource "azurerm_storage_share" "example_file_share" {
  name               = "myfileshare"
  storage_account_id = azurerm_storage_account.example.id
  quota              = 50
}
```

Create a new Terraform file, then copy the response from GitHub Copilot for Azure and paste into the new file.

Modify the place holder text for values like `example-resources`, `examplestoracc`, `myblobcontainer` and `myfileshare`, and modify values that affect the names, location, SKUs, etc.

## Refine the response

However, if you're new to bicep files, you may need more information. Continue prompting in the same chat sesssion to understand next steps.

For example, you may want specific instructions on which values to change.

```
@azure Which values should I replace in this Terraform template?
```

You may see a response similar to the following.

```
You should replace the following values in the Terraform template to suit your needs:

azurerm_resource_group.example.name: Change "example-resources" to your desired Resource Group name if necessary.
azurerm_resource_group.example.location: Update "West Europe" to the Azure region where you want to deploy the resources.
azurerm_storage_account.example.name: Ensure "examplestoracc" is a globally unique name for your storage account.
azurerm_storage_container.example_blob_container.name: Change "myblobcontainer" to your preferred blob container name.
azurerm_storage_share.example_file_share.name: Change "myfileshare" to your preferred file share name.
azurerm_storage_share.example_file_share.quota: Adjust the value 50 to set the desired size quota for your file share in GB.
These adjustments will tailor the template to your specific requirements and ensure successful deployment.
```

Or, you may want to ask where this Terraform file should be created in your VS Code workspace.

```
@azure Where in my workspace should I create the Terraform file and what should I call it?
```

It may respond by suggesting a folder and file name for your new bicep file.

```
In your workspace, you should create a Terraform configuration file with the .tf extension, commonly named main.tf. You can place it in the root directory of your Terraform project or in any organized directory named to suit your Azure resources, such as /terraform/.
```

If you're unsure about how to deploy the bicep file, you can create a prompt that asks for instructions.

```
@azure How do I execute the Terraform file?
```

You may receive a response similar to the following.

```
To execute the Terraform file, follow these steps:

Navigate to your project directory: Open a terminal and change the directory to where your Terraform file is located.

`cd path/to/your/terraform/directory`

Initialize the Terraform environment: Run this command to download the necessary providers and initialize your project.

`terraform init`

Review the execution plan: Generate and review the execution plan to verify the changes to be applied.

`terraform plan`

Apply the changes: Apply the planned changes to deploy the resources.

`terraform apply`

Confirm the action: Type yes when prompted to confirm and apply the changes.

This will execute the Terraform configuration and create the resources described in your template.
```

## Edit Terraform files

Understanding and modifying an existing bicep files can also be a daunting task if you're new to the syntax, but is made easier with GitHub Copilot for Azure.

### Example Scenario

Suppose you have taken over support for an existing application that has several bicep templates defined. You do not work with Terraform often and may need some help when working with Terraform files.

If you want to follow along exactly with the:

1. Within GitHub, fork `https://github.com/Azure/terraform.git` to your personal account.
2. From a command prompt, navigate to the directory where you work on source code (like `c:\source` in the following example), then clone your fork locally.

```
cd c:\source
git clone https://github.com/<your-github-id>/terraform.git
```

3. In Visual Studio Code, open the `c:\source\terraform\quickstart\101-app-service-app-deploy` directory.


The folder contains several files, but you're unsure what they contain or how they can be used. You open the `main.tf` file in the code editor to preview the file.

   :::image type="content" source="media/terraform-generate-edit/ghcpa-terraform-edit.png" alt-text="Screenshot that shows Visual Studio Code with a project open in the Explorer pane and a main.tf file open in the .":::

GitHub Copilot for Azure allows you to ask specific questions about the file that is currently in the code editor. In the chat pane, below the prompt, there's a bicep icon, followed by the name of the file that's open in the main editor, and the words `Current file` followed by an eye icon.

   :::image type="content" source="media/bicep-generate-edit/ghcpa-chat-current-file.png" alt-text="Screenshot that shows the GitHub Copilot chat pane.":::

### Example prompt

You could ask GitHub Copilot for Azure about this file (or any of the files in the folder) to understand more.

```
@azure Explain what this Terraform file does.
```

### Example response

GitHub Copilot for Azure may respond by walking through the various sections and explaining the keyword tokens used in the file.

You could follow up with questions such as:

```
@azure What app service plan is currently being used?
```

```
The App Service Plan being used is defined by the azurerm_app_service_plan resource. The specific SKU (Stock Keeping Unit) tier and size are configured using the variables var.app_service_plan_sku_tier and var.app_service_plan_sku_size. To know the exact tier and size being used, you would need to check the values assigned to these variables in your Terraform variables file or wherever they are defined.
```

The answer indicates that the values are set by variables which are likely stored in another file. You spot a `variables.tf` file and open it in the main editor. Ask the question again.

```
@azure What app service plan is currently being used?
```

This time, GitHub Copilot for Azure identifies the service plan in use.

```
The App Service Plan currently being used is set with the following configuration:

- Tier: PremiumV3
- Size: P0v3

These values are specified by default in the variables.tf file under app_service_plan_sku_tier and app_service_plan_sku_size.
```


## Related content
